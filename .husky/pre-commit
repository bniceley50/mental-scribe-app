#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged
pnpm lint-staged

# Block stray console.* calls outside logger internals
if git diff --cached --name-only | grep -E '\.(ts|tsx|js|jsx)$' > /dev/null; then
  if git diff --cached --name-only | grep -E '\.(ts|tsx|js|jsx)$' | grep -v 'src/lib/logger' | xargs grep -n 'console\.\(log\|error\|warn\|info\|debug\)' 2>/dev/null; then
    echo "‚ùå Error: Direct console calls found. Use logger instead."
    exit 1
  fi
fi
